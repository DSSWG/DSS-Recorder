<html>
<head>
<title>Demo of DSS Playback</title>
<style type="text/css">
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.record, .playback {
  position: absolute;
  right: 20px;
  border: 1px solid #ccc;
  border-radius: 3px;
  background: white;
  color: #444;
  font-size: 14px;
  font-weight: bold;
  padding: 10px 15px;
  width: 180px;
  text-align: center;
}
.playback:hover, .record:hover {
  cursor: pointer;
  background: #efefef;
}
.playback:focus, .record:focus {
  outline: none;
}
.playback {
  bottom: 70px;
}
.record {
  bottom: 20px;
}
.record.recording {
  background: red;
  color: white;
  border: 1px solid transparent;
}
.cursor {
  position: absolute;
  top: 0;
  left: 0;
  background: rgba(0,0,0,0.5);
  border: 3px solid rgba(255,255,255,0.5);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  z-index: 99999999;
  opacity: 0;
}
.box {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100px;
  height: 100px;
  margin: -50px 0 0 -50px;
  background: blue;
  transition: all 0.5s;
}
.box:hover {
  background: yellow;
}
.box:active {
  background: orange;
}
</style>
</head>
<body>

  <button class="record">Start Recording</button>
  <button class="playback">Playback</button>
  <div class="cursor"></div>
  <div class="box"></div>

<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript">

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
*/
jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b+c;return-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b+c;return d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b+c;return-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b*b+c;return d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){if(b==0)return c;if(b==e)return c+d;if((b/=e/2)<1)return d/2*Math.pow(2,10*(b-1))+c;return d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){if((b/=e/2)<1)return-d/2*(Math.sqrt(1-b*b)-1)+c;return d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e)==1)return c+d;if(!g)g=e*.3;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e)==1)return c+d;if(!g)g=e*.3;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;if(!g)g=e*.3*1.5;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);if(b<1)return-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c;return h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){if(f==undefined)f=1.70158;return d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){if(f==undefined)f=1.70158;return d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){if(f==undefined)f=1.70158;if((b/=e/2)<1)return d/2*b*b*(((f*=1.525)+1)*b-f)+c;return d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){if((b/=e)<1/2.75){return d*7.5625*b*b+c}else if(b<2/2.75){return d*(7.5625*(b-=1.5/2.75)*b+.75)+c}else if(b<2.5/2.75){return d*(7.5625*(b-=2.25/2.75)*b+.9375)+c}else{return d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}},easeInOutBounce:function(a,b,c,d,e){if(b<e/2)return jQuery.easing.easeInBounce(a,b*2,0,d,e)*.5+c;return jQuery.easing.easeOutBounce(a,b*2-e,0,d,e)*.5+d*.5+c}});

/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);

// ------------------------------------
// Demo
// ------------------------------------

var cursor = $('.cursor');
var box = $('.box');
var noisey = true;
var events = [];
var currentTarget = null;
var currentEvent = null;
var time = new Date().getTime();

var addClasses = function () {
  var css = '';
  for (var x = 0; x < document.styleSheets.length; x++) {
    var rules = document.styleSheets[x].cssRules;
    for (var i = 0; i < rules.length; i++) {
      var matches = rules[i].selectorText.match( /(:hover|:active|:focus)/g );
      if ( matches ) {
        matches.forEach( function ( name ) {
          var className = '.dss-' + name.substring( 1, i.length );
          css += rules[i].cssText.replace( name, className );
        });
      }
    }
  }
  $('body').append('<style>' + css + '</style>');
};

var customEvent = function ( target, type, options ) {
  options = options || {};
  options.delay = options.delay || 0;
  return { type: type, target: target, options: options  };
};

var play = function ( events, position ) {
  if ( !position ) {
    currentTarget = null;
    currentEvent = null;
  }
  position = position || 0;
  var e = events[ position ];
  trigger( e, cursor );
  position++;
  if ( position < events.length ) {
      setTimeout( function () {
          play( events, position );
      }, e.options.delay);
  }
};

var trigger = function ( e, cursor ) {

  // Remove DSS Pseudo Classes from Previous Target
  if ( currentTarget ) {
    currentTarget.removeClass(function ( index, css ) {
      return (css.match(/(^|\s)dss-\S+/g) || []).join(' ');
    });
  }

  // Update Target
  currentTarget = e.target.first();

  // Move Cursor
  var x = e.options.x;
  var y = e.options.y;

  if ( x && y ) {

    var speed = e.options.speed || 0;
    var options = { duration: speed };

    if ( cursor.css('opacity') == 0 ) {
      cursor.css( { left: x + 'px', top: y + 'px' } ).animate( { opacity: 1 }, options );
    } else {
      cursor.animate( { left: x + 'px', top: y + 'px' }, options );
    }

  } else {
    cursor.animate( { opacity: 0 }, options );
  }

  // Add Classes to Mimc Pseudo Events
  if ( e.type == 'mouseover' || e.type == 'hover' ) {
    e.target.addClass('dss-hover');
  } else if ( e.type == 'click' ) {
    e.target.addClass('dss-active')
  } else if ( e.type == 'focus' ) {
    e.target.addClass('dss-focus');
  }

  // Trigger Event
  e.target.trigger( e.type );

};

// Add Classes
addClasses();

// Cursor Positioning Relative to Target
var coord = { x: box.offset().left, y: box.offset().top };
var dim = { x: ( box.width() / 2 ), y: ( box.height() / 2 ) };
var off = { x: ( cursor.width() / 2 ), y: ( cursor.height() / 2 ) };
var x = coord.x + dim.x - off.x;
var y = coord.y + dim.y - off.y;

// Record Events
var record = function (e) {
  if ( currentTarget != e.target || currentEvent != e.type || noisey ) {
    var diff = new Date().getTime();
    var delay = diff - time;
    var off = { x: ( cursor.width() / 2 ), y: ( cursor.height() / 2 ) };
    var x = e.pageX - off.x;
    var y = e.pageY - off.y;
    events.push( new customEvent( $(e.target), e.type, { x: x, y: y, speed: 300, delay: delay } ) );
    time = diff;
  }
  currentTarget = e.target;
  currentEvent = e.type;
};

// Play Button
$('.playback').on('click', function(e) {
  e.preventDefault();
  e.stopPropagation();
  var el = $(this);
  play( events );
});

// Record Button
$('.record').on('click', function(e){
  e.preventDefault();
  e.stopPropagation();
  var el = $(this);
  if ( el.hasClass('recording') ) {
    el.removeClass('recording').text('Start Recording');
    $(document).off('click mouseover mouseout mousemove scroll');
  } else {
    events = [];
    el.addClass('recording').text('Stop Recording');
    $(document).on('click mouseover mouseout mousemove scroll', $.throttle( 300, record ));
  }
});

</script>
</body>
</html>